# Simple.AutoMapper v1.0.8

Release date: 2025-10-28

## Highlights

This release introduces comprehensive Dependency Injection (DI) support, making Simple.AutoMapper a first-class citizen in modern .NET applications using Microsoft.Extensions.DependencyInjection.

### New Features

- **ISimpleMapper Interface** - Abstraction for dependency injection
- **AddSimpleMapper() Extension** - One-line DI registration
- **MapperConfiguration** - Fluent configuration API
- **Profile Support** - Group related mappings together
- **Assembly Scanning** - Auto-discover profiles in assemblies

## Dependency Injection Integration

### Basic Setup

```csharp
// In Program.cs or Startup.cs
services.AddSimpleMapper();
```

### With Profile Configuration

```csharp
services.AddSimpleMapper(cfg => {
    cfg.AddProfile<UserMappingProfile>();
    cfg.AddProfile<OrderMappingProfile>();
});
```

### Assembly Scanning

```csharp
// Automatically discover all Profile classes in the assembly
services.AddSimpleMapper(typeof(UserMappingProfile).Assembly);
```

### Creating Profiles

```csharp
public class UserMappingProfile : Profile
{
    public UserMappingProfile()
    {
        CreateMap<User, UserDto>()
            .ForMember(d => d.FullName, opt => opt.MapFrom(s => $"{s.FirstName} {s.LastName}"));

        CreateMap<Address, AddressDto>();
    }
}
```

### Constructor Injection

```csharp
public class UserController : ControllerBase
{
    private readonly ISimpleMapper _mapper;

    public UserController(ISimpleMapper mapper)
    {
        _mapper = mapper;
    }

    [HttpGet("{id}")]
    public ActionResult<UserDto> Get(int id)
    {
        var user = _userService.GetById(id);
        return _mapper.Map<User, UserDto>(user);
    }
}
```

## API Reference

### ISimpleMapper Interface

```csharp
public interface ISimpleMapper
{
    TDestination Map<TSource, TDestination>(TSource source);
    TDestination Map<TSource, TDestination>(TSource source, TDestination destination);
    IReadOnlyList<TDestination> Map<TSource, TDestination>(IEnumerable<TSource> sources);
}
```

### MapperConfiguration Class

```csharp
public class MapperConfiguration
{
    public MapperConfiguration AddProfile<TProfile>() where TProfile : Profile, new();
    public MapperConfiguration AddProfile(Profile profile);
}
```

## Target Frameworks

DI features are available for:
- netstandard2.1
- net8.0
- net9.0

Note: netstandard2.0 does not include DI extensions due to Microsoft.Extensions.DependencyInjection.Abstractions compatibility.

## Breaking Changes

None. All existing v1.0.7 features remain compatible.

## Upgrade Guide

No migration required. Simply update the package:

```powershell
dotnet add package Simple.AutoMapper --version 1.0.8
```

To adopt DI:
1. Replace direct `Mapper.Map<>()` calls with injected `ISimpleMapper`
2. Create Profile classes to organize your mappings
3. Register with `services.AddSimpleMapper()`

## What's Next

See [ROADMAP.md](../ROADMAP.md) for planned features:
- ForMember Condition support
- NullSubstitute for null value replacement
- BeforeMap/AfterMap callbacks
